#### Installation ####
# File: .zshrc or .bashrc or ...
# Add:  source ~/.my_profile
# Done...

### Determine OS being used ###

MY_OS="`uname`"
case $MY_OS in
  'Linux')
    MY_OS='linux'
    ;;
  'WindowsNT')
    MY_OS='windows'
    ;;
  'Darwin')
    MY_OS='mac'
    ;;
  *) ;;
esac
 
### Determine SHELL being used ###

MY_SHELL=$(ps -p $$)
if [[ $MY_SHELL == *zsh* ]]; then
  MY_SHELL=zsh
elif [[ $MY_SHELL == *bash* ]]; then
  MY_SHELL=bash
fi

### Determine TERM being used ###

# Note: what terminal a shell is running it (i.e. parent of the shell)
MY_TERM=$TERM
if [[ $MY_TERM == *xterm* ]]; then
  MY_TERM=xterm
fi

# verify in terminal
if [ -n $1 ] && [[ $1 == "-v" ]]; then
  echo "Under: $MY_OS $MY_TERM $MY_SHELL"
fi

### Terminal History ###

# Saving HISTFILESIZE lines to disk and loading the last HISTSIZE lines into memory
HISTSIZE=5000
HISTFILESIZE=10000

# Append history from each session, not the last to log out
if [[ $MY_SHELL == bash ]]; then
  shopt -s histappend
elif [[ $MY_SHELL == zsh ]]; then
  setopt INC_APPEND_HISTORY
fi

# Add commands immediatley to history, not wait for log out
export PROMPT_COMMAND="history -a; history -c; history -r; $PROMPT_COMMAND"

### Variables ###

export SUCCESS=0
export FAIL=1
# editor default
export EDITOR="vim"

### Aliases ###

alias ohmyzsh='mate ~/.oh-my-zsh'
alias ktmux='tmux kill-session -t'
alias god='sudo'
alias c='clear'
alias q='exit'
alias ..='cd ..'
alias ...='cd ../..'
alias ....='cd ../../..'
if [[ $MY_SHELL == zsh ]]; then
  alias ll='ls -hal'
  alias l.='ls -d .*'
else
  alias ls='ls --color=auto'
  alias ll='ls -hal --color=auto'
  alias l.='ls -d  --color=auto .*'
fi
alias mkdir='mkdir -pv'
alias df="df -h"
alias du="du -sh"
if [[ $MY_OS == linux ]]; then
  alias apt-get='sudo apt-get'
fi

# Port forwarding thru SSH
#alias torified="ssh -D 127.0.0.1:1080 -L 3128:127.0.0.1:3128 -L 8123:127.0.0.1:8123 -L 8118:127.0.0.1:8118 -L 9050:127.0.0.1:9050 <username>@<ip> -p <port>"

### Functions ###

# list after each cd
cd() {
  if [ -n "$1" ]; then
    builtin cd "$@" && ls
  else
    builtin cd ~ && ls
  fi
}

# make space in terminal for scrolling
space() {
  for i in {1..25}
  do
   echo ""
  done
  clear
}

### Term Specifics ###

if [[ $MY_TERM == xterm ]]; then
  # Make backspace work instead of delete ^H
  stty erase '^?'
fi

### Other ###

if [[ $MY_OS == mac ]]; then
  if type archey > /dev/null 2>&1; then
    archey
  fi

  alias afplay='afplay -q 1'

  # For fun...
  if [[ $MY_SHELL == zsh ]]; then
    source "$( dirname "${(%):-%N}" )/.sounds/.sound" > /dev/null 2>&1
  elif [[ $MY_SHELL == bash ]]; then
    source "$( dirname "${BASH_SOURCE[0]}" )/.sounds/.sound"  > /dev/null 2>&1
  fi
fi
